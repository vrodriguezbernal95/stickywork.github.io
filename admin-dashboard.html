<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-QNNFJWC6PV"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-QNNFJWC6PV');
    </script>
    <!-- Microsoft Clarity -->
    <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "us5furlqob");
    </script>


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - StickyWork Admin</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="admin/css/admin.css">
</head>
<body>
    <!-- Bot√≥n hamburguesa para m√≥vil -->
    <button class="mobile-menu-toggle" id="mobileMenuToggle" aria-label="Abrir men√∫">
        ‚ò∞
    </button>

    <!-- Overlay para cerrar sidebar en m√≥vil -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Sidebar -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">StickyWork</div>
        </div>

        <nav class="sidebar-nav">
            <a href="#" class="sidebar-link active" data-section="dashboard">
                üìä Dashboard
            </a>
            <a href="#" class="sidebar-link" data-section="bookings">
                üìÖ Reservas
            </a>
            <a href="#" class="sidebar-link" data-section="services">
                üõ†Ô∏è Servicios
            </a>
            <a href="#" class="sidebar-link" data-section="calendar">
                üìÜ Calendario
            </a>
            <a href="#" class="sidebar-link" data-section="widget">
                üé® Widget
            </a>
            <a href="admin/opiniones.html" class="sidebar-link">
                ‚≠ê Opiniones
            </a>
            <a href="#" class="sidebar-link" data-section="settings">
                ‚öôÔ∏è Configuraci√≥n
            </a>
        </nav>

        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar" id="userAvatar">A</div>
                <div class="user-details">
                    <div class="user-name" id="userName">Cargando...</div>
                    <div class="user-email" id="userEmail"></div>
                </div>
            </div>
            <button class="btn-logout" id="logoutBtn">
                Cerrar Sesi√≥n
            </button>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
        <header class="topbar">
            <div class="topbar-title" id="pageTitle">Dashboard</div>
            <div id="businessName" style="color: var(--text-secondary); font-size: 1rem;"></div>
        </header>

        <div class="content-area" id="contentArea">
            <!-- Content will be loaded dynamically by modules -->
            <div class="loading">
                <p>Cargando datos...</p>
            </div>
        </div>
    </main>

    <!-- Load modules in order -->
    <script src="admin/js/api.js"></script>
    <script src="admin/js/auth.js"></script>
    <script src="admin/js/components/stat-card.js"></script>
    <script src="admin/js/components/status-badge.js"></script>
    <script src="admin/js/components/modal.js"></script>
    <script src="admin/js/utils.js"></script>
    <script src="admin/js/dashboard.js"></script>
    <script src="admin/js/bookings.js"></script>
    <script src="admin/js/messages.js"></script>
    <script src="admin/js/services.js"></script>
    <script src="admin/js/calendar.js"></script>
    <script src="admin/js/widget.js"></script>
    <script src="admin/js/settings.js"></script>
    <script src="admin/js/support.js"></script>
    <script src="admin/js/app.js"></script>

    <!-- Script para men√∫ m√≥vil -->
    <script>
        (function() {
            const mobileMenuToggle = document.getElementById('mobileMenuToggle');
            const sidebar = document.getElementById('sidebar');
            const sidebarOverlay = document.getElementById('sidebarOverlay');
            const sidebarLinks = document.querySelectorAll('.sidebar-link');

            // Abrir/cerrar sidebar
            function toggleSidebar() {
                sidebar.classList.toggle('active');
                sidebarOverlay.classList.toggle('active');

                // Cambiar icono del bot√≥n
                if (sidebar.classList.contains('active')) {
                    mobileMenuToggle.innerHTML = '‚úï';
                    mobileMenuToggle.setAttribute('aria-label', 'Cerrar men√∫');
                } else {
                    mobileMenuToggle.innerHTML = '‚ò∞';
                    mobileMenuToggle.setAttribute('aria-label', 'Abrir men√∫');
                }
            }

            // Cerrar sidebar
            function closeSidebar() {
                sidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
                mobileMenuToggle.innerHTML = '‚ò∞';
                mobileMenuToggle.setAttribute('aria-label', 'Abrir men√∫');
            }

            // Event listeners
            if (mobileMenuToggle) {
                mobileMenuToggle.addEventListener('click', toggleSidebar);
            }

            if (sidebarOverlay) {
                sidebarOverlay.addEventListener('click', closeSidebar);
            }

            // Cerrar sidebar al hacer clic en un link (en m√≥vil)
            sidebarLinks.forEach(link => {
                link.addEventListener('click', () => {
                    // Solo cerrar en m√≥vil (cuando el overlay est√° visible)
                    if (window.innerWidth <= 768) {
                        closeSidebar();
                    }
                });
            });

            // Cerrar sidebar al redimensionar a desktop
            window.addEventListener('resize', () => {
                if (window.innerWidth > 768) {
                    closeSidebar();
                }
            });
        })();
    </script>
</body>
</html>
